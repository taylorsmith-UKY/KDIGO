<script src="static/js/jquery-1.11.1.js" xmlns="http://www.w3.org/1999/html"></script>

<!DOCTYPE html>
<html lang="en">
<head>

    <script>
    $(document).ready(function(){
      $("#predict").click(function(){
        var age, temp, hr, map, unplanned, ecmo, iabp, mechvent, sepsis, vasopress, bili, sodium, albumin, po2, pco2, hemoglobin, fio2, platelets, bicarb, bun, ph, maxkdigo, lastkdigo, rrt_flag, fluidoverload, urine_output;

        age = parseFloat($("#id_age").val());
        temp = parseFloat($("#id_temp").val());
        hr = parseFloat($("#id_heartrate").val());
        map = parseFloat($("#id_map").val());
        unplanned = parseFloat($("#id_is_unplanned_admission").val());

        // alert("Age: " + age);
        // alert("Temperature: " + temp);
        // alert("HR: " + hr);
        // alert("MAP: " + map);
        // alert("Unplanned Admission: " + unplanned);


        ecmo = parseFloat($("#id_got_ecmo").val());
        iabp = parseFloat($("#id_got_iabp").val());
        mechvent = parseFloat($("#id_got_mechvent").val());
        sepsis = parseFloat($("#id_is_septic").val());
        vasopress = parseFloat($("#id_vasopress_exp").val());

        // alert("ECMO: " + ecmo);
        // alert("IABP: " + iabp);
        // alert("MechVent: " + mechvent);
        // alert("Sepsis: " + sepsis);
        // alert("Vasopressor: " + vasopress);


        bili = parseFloat($("#id_bili").val());
        sodium = parseFloat($("#id_sodium").val());
        albumin = parseFloat($("#id_albumin").val());
        po2 = parseFloat($("#id_po2").val());
        pco2 = parseFloat($("#id_pco2").val());
        hemoglobin = parseFloat($("#id_hemoglobin").val());
        fio2 = parseFloat($("#id_fio2").val());
        platelets = parseFloat($("#id_platelets").val());
        bicarb = parseFloat($("#id_bicarbonate").val());
        bun = parseFloat($("#id_bun").val());
        ph = parseFloat($("#id_ph").val());

        // alert("Bilirubin: " + bili);
        // alert("Sodium: " + sodium);
        // alert("Albumin: " + albumin);
        // alert("pO2: " + po2);
        // alert("pCO2: " + pco2);
        // alert("Hemoglobin: " + hemoglobin);
        // alert("FiO2: " + fio2);
        // alert("Platelets: " + platelets);
        // alert("Bicarbonate: " + bicarb);
        // alert("BUN: " + bun);
        // alert("pH: " + ph);

        maxkdigo = parseFloat($("#id_maxKDIGO_3day").val());
        lastkdigo = parseFloat($("#id_lastKDIGO").val());
        rrt_flag = parseFloat($("#id_rrt_flag").val());
        fluidoverload = parseFloat($("#id_fluidoverload").val());
        urine_output = parseFloat($("#id_urineout").val());

        // alert("MaxKDIGO: " + maxkdigo);
        // alert("LastKDIGO: " + lastkdigo);
        // alert("RRT Flag: " + rrt_flag);
        // alert("FluidOverload: " + fluidoverload);
        // alert("UrineOutput: " + urine_output);

        var age_weight, temp_weight, hr_weight, map_weight, unplanned_weight, ecmo_weight, iabp_weight, mechvent_weight, sepsis_weight, vasopress_weight, bili_weight, sodium_weight, albumin_weight, po2_weight, pco2_weight, hemoglobin_weight, fio2_weight, platelets_weight, bicarb_weight, bun_weight, ph_weight, maxkdigo_weight, lastkdigo_weight, rrt_flag_weight, fluidoverload_weight, urine_output_weight;

        var z, y;

        var bias = 0.0;
        age_weight = 0.020203;
        temp_weight = -0.156026;
        hr_weight = 0.00468;
        map_weight = 0.001777;
        unplanned_weight = 0.609367;
        ecmo_weight = 0.07278;
        iabp_weight = 0.121364;
        mechvent_weight = 0.255244;
        sepsis_weight = 0.447121;
        vasopress_weight = 0.128436;
        bili_weight = 0.068726;
        sodium_weight = 0.013327;
        albumin_weight = -0.22191;
        po2_weight = 0.001817;
        pco2_weight = 0.004754;
        hemoglobin_weight = -0.031884;
        fio2_weight = 0.008714;
        platelets_weight = -0.000399;
        bicarb_weight = 0.009523;
        bun_weight = 0.002868;
        ph_weight = 0.028222;
        maxkdigo_weight = -0.30585;
        lastkdigo_weight = 0.667483;
        rrt_flag_weight = -0.084235;
        fluidoverload_weight = 0.044914;
        urine_output_weight = -0.004113;

        z = bias + (age * age_weight) + (temp * temp_weight) + (hr * hr_weight) + (map * map_weight) + (unplanned * unplanned_weight) + (ecmo * ecmo_weight) + (iabp * iabp_weight) + (mechvent * mechvent_weight) + (sepsis * sepsis_weight) + (vasopress * vasopress_weight) + (bili * bili_weight) + (sodium * sodium_weight) + (albumin * albumin_weight) + (po2 * po2_weight) + (pco2 * pco2_weight) + (hemoglobin * hemoglobin_weight) + (fio2 * fio2_weight) + (platelets * platelets_weight) + (bicarb * bicarb_weight) + (bun * bun_weight) + (ph * ph_weight) + (maxkdigo * maxkdigo_weight) + (lastkdigo * lastkdigo_weight) + (rrt_flag * rrt_flag_weight) + (fluidoverload * fluidoverload_weight) + (urine_output * urine_output_weight);

        y = 1 / (1 + Math.exp(-z));

        alert("Computed probability: " + y);

      });
    });
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">


    <title> AKI Predictor of Outcomes (AKIPO) </title>

    <!-- Bootstrap core CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap social -->
    <link href="static/css/bootstrap-social.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="static/css/business-frontpage.css" rel="stylesheet">

    <!-- Login page -->
    
    <link rel="stylesheet" href="static/css/font-awesome.min.css">

</head>

<body data-spy="scroll" data-target=".navbar" data-offset="100">


<div class="container-fluid">
    <!-- Example row of columns -->
    <div class="row" style="margin-top: 60px;">

    <!-- go to anchor -->
    

    <div class="container">
        
        <div class="row">
            <div class="col-sm-12">
                <h1> AKI Predictor of Outcomes (AKIPO) </h1>
                <p>
                    The AKI predictor of Outcomes (AKIPO) is only appropriate for patients admitted to an intensive care unit (ICU)
                    and who experience AKI during/within the first 3 days admitted to the ICU.

                </p>

                <p>
                    After individual patient characteristics have been provided, AKIPO will evaluate a predicted risk
                    for the outcomes of hospital mortality and experiencing a Major Adverse Kidney Event (MAKE) in the 90
                    days following discharge from the ICU. All features correspond to the first 72 hours in the ICU, except
                    where otherwise indicated for later AKI specific features. The predicted risks are calculated based on
                    training a logistic regression model on a total of 6816 patients that were admitted to the University
                    of Kentucky Chandler Hospital ICU from XXXX-XXXX. The model was additionally validated on an external
                    cohort of 1792 patients admitted to the University of Texas Southwestern hospital ICU from XXXX-XXXX.
                    For details on model development and validation, see XXXXXXX.

                </p>

                <p>
                    In order to have the most accurate prediction, please enter all available information of the
                    patient below. Extreme caution is required when using the AKIPO for therapeutic
                    decisions in individual patients.

                </p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">



            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                    <h1> Critically ill patient information </h1>
            </div>
        </div>

        <div class="col-sm-12">


            <div class="row bs-wizard" style="border-bottom:0; margin-top: 5px">

                <div class="col-xs-3 bs-wizard-step complete">
                    <div class="text-center bs-wizard-stepnum">Basic information</div>
                    <div class="progress"><div class="progress-bar"></div></div>
                    <a href="#" class="bs-wizard-dot"></a>

                </div>

                <div class="col-xs-3 bs-wizard-step complete">
                    <div class="text-center bs-wizard-stepnum">Treatments</div>
                    <div class="progress"><div class="progress-bar"></div></div>
                    <a href="#" class="bs-wizard-dot"></a>

                </div>

                <div class="col-xs-3 bs-wizard-step complete">
                    <div class="text-center bs-wizard-stepnum">Labs</div>
                    <div class="progress"><div class="progress-bar"></div></div>
                    <a href="#" class="bs-wizard-dot"></a>

                </div>

                <div class="col-xs-3 bs-wizard-step complete">
                    <div class="text-center bs-wizard-stepnum">AKI Specific Information</div>
                    <div class="progress"><div class="progress-bar"></div></div>
                    <a href="#" class="bs-wizard-dot"></a>

                </div>

            </div>
    

    <!-- <form method="post" action=""><input type='hidden' name='csrfmiddlewaretoken' value='lbTv0b1ESq0WiXYUhyQyGVUxj1JEtFl0' /> -->

        <div class="col-sm-3">

<!--        <input id="id_baseline_form" name="baseline_form" type="hidden" value="True" />-->
            <div class="form-group ">
                <label for="id_age">
                    Age
                </label>
                <input class="form-control" id="id_age" max="104.0" min="18.0" name="age" step="any" type="number" value=23 \>

                <span id="helpBlock" class="help-block">18-104 years</span>
            </div>



            <div class="form-group ">
                <label for="id_temp">
                    Minimum recorded body temperature
                </label>
                <input class="form-control" id="id_temp" max="38.6" min="30.0" name="temperature" step="any" type="number" value=37.0 />

                <span id="helpBlock" class="help-block">30.0-38.6 Degrees Celsius</span>
            </div>


            <div class="form-group ">
                <label for="id_heartrate">
                    Maximum recorded heart-rate
                </label>
                <input class="form-control" id="id_heartrate" max="286.0" min="50.0" name="heartrate" step="any" type="number" value=120 />
                <span id="helpBlock" class="help-block">50-286 BPM</span>
            </div>


            <div class="form-group ">
                <label for="id_map">
                    Minimum mean arterial pressure (MAP)
                </label>
                <input class="form-control" id="id_map" max="152.0" min="28.0" name="map" step="any" type="number" value=98.0 />
                <span id="helpBlock" class="help-block">28-152 mmHg</span>
            </div>


            <div class="form-group ">
                <label for="id_is_unplanned_admission">
                    Planned/Unplanned admission
                    <strong>*</strong>
                </label>
                <select class="form-control" id="id_is_unplanned_admission" name="is_unplanned_admission">
                    <option value="">[Select]</option>
                    <option value="0">Planned admission</option>
                    <option value="1" selected="selected">Unplanned admission</option>
                </select>

                <span id="helpBlock" class="help-block"></span>
            </div>

            <div class="form-group ">
                <label for="id_is_septic">
                    Presence of sepsis at admission
                </label>
                <select class="form-control" id="id_is_septic" name="is_septic">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Sepsis diagnosis</option>
                    <option value="1">No Sepsis</option>
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>
        </div>

        <div class="col-sm-3">

            <div class="form-group ">
                <label for="id_got_ecmo">
                    ECMO Utilization
                </label>
                <select class="form-control" id="id_got_ecmo" name="got_ecmo">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Did not received ECMO</option>
                    <option value="1">Received ECMO</option>
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>

            <div class="form-group ">
                <label for="id_got_iabp">
                    IABP Utilization
                </label>
                <select class="form-control" id="id_got_iabp" name="got_iabp">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Did not received IABP</option>
                    <option value="1">Received IABP</option>
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>

            <div class="form-group ">
                <label for="id_got_mechvent">
                    Mechanical Ventillation
                </label>
                <select class="form-control" id="id_got_mechvent" name="got_mechvent">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Did not received mechanical ventillation</option>
                    <option value="1">Received mechanical ventillation</option>
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>


            <div class="form-group ">
                <label for="id_vasopress_exp">
                    Exposure to vasopressors
                </label>
                <select class="form-control" id="id_vasopress_exp" name="vasopress_exp">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Did not received any vasopressors</option>
                    <option value="1">Received vasopressors</option>
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>

        </div>


        <div class="col-sm-3">

            <div class="form-group ">
                <label for="id_bili">
                    Bilirubin
                </label>
                <input class="form-control" id="id_bili" max="53.2" min="0.1" name="bilirubin" step="any" type="number" value=34.1 />


                <span id="helpBlock" class="help-block">0.1 - 53.2</span>
            </div>

            <div class="form-group ">
                <label for="id_sodium">
                    Highest recorded sodium
                </label>
                <input class="form-control" id="id_sodium" max="192.0" min="113.0" name="sodium" step="any" type="number" value=143.0 />
        
                <span id="helpBlock" class="help-block">113 - 192</span>
            </div>

            <div class="form-group ">
                <label for="id_albumin">
                    Albumin
                </label>
                <input class="form-control" id="id_albumin" max="6.1" min="0.4" name="albumin" step="any" type="number" value=2.3 />

                <span id="helpBlock" class="help-block">0.4 - 6.1</span>
            </div>

            <div class="form-group ">
                <label for="id_po2">
                    Lowest recorded pO2
                </label>
                <input class="form-control" id="id_po2" max="496.0" min="17.0" name="po2" step="any" type="number" value=220 />

        
                <span id="helpBlock" class="help-block">17 - 496</span>
            </div>

            <div class="form-group ">
                <label for="id_pco2">
                    Highest recorded pCO2
                </label>
                <input class="form-control" id="id_pco2" max="125.0" min="7.0" name="pco2" step="any" type="number" value=100 />

                <span id="helpBlock" class="help-block">7 - 125</span>
            </div>

            <div class="form-group ">
                <label for="id_hemoglobin">
                    Lowest recorded hemoglobin
                </label>
                <input class="form-control" id="id_hemoglobin" max="18.6" min="2.3" name="hemoglobin" step="any" type="number" value=12.2 />

                <span id="helpBlock" class="help-block">2.3 - 18.6</span>
            </div>

            <div class="form-group ">
                <label for="id_fio2">
                    Highest recorded FiO2
                </label>
                <input class="form-control" id="id_fio2" max="100.0" min="21.0" name="fio2" step="any" type="number" value=81 />

                <span id="helpBlock" class="help-block">21 - 100</span>
            </div>

            <div class="form-group ">
                <label for="id_platelets">
                    Platelets
                </label>
                <input class="form-control" id="id_platelets" max="1403.0" min="5.0" name="platelets" step="any" type="number" value=750 />

                <span id="helpBlock" class="help-block">5 - 1403</span>
            </div>

            <div class="form-group ">
                <label for="id_bicarbonate">
                    Lowest recorded bicarbonate
                </label>
                <input class="form-control" id="id_bicarbonate" max="49.0" min="5.0" name="bicarbonate" step="any" type="number" value=23.0 />

                <span id="helpBlock" class="help-block">5 - 49</span>
            </div>

            <div class="form-group ">
                <label for="id_bun">
                    Highest recorded BUN
                </label>
                <input class="form-control" id="id_bun" max="271.0" min="6.0" name="bun" step="any" type="number" value=185 />

                <span id="helpBlock" class="help-block">6 - 271</span>
            </div>

            <div class="form-group ">
                <label for="id_ph">
                    Lowest recorded pH
                </label>
                <input class="form-control" id="id_ph" max="7.60" min="6.51" name="ph" step="any" type="number" value=7.42 />

                <span id="helpBlock" class="help-block">6.51 - 7.60</span>
            </div>


        </div>


        <div class="col-sm-3">

            <div class="form-group ">
                <label for="id_maxKDIGO_3day">
                    Maximum KDIGO score in ICU days 0-3
                </label>
                <input class="form-control" id="id_maxKDIGO_3day" max="4" min="0" name="maxKDIGO_3day" step="any" type="number" value=3 />

                <span id="helpBlock" class="help-block">KDIGO score 0-4 (4 indicating RRT administration)</span>
            </div>



            <div class="form-group ">
                <label for="id_lastKDIGO">
                    Latest recorded KDIGO score
                    <strong>*</strong>
                </label>
                <input class="form-control" id="id_lastKDIGO" max="4" min="0" name="lastKDIGO" step="any" type="number" value=1 />

                <span id="helpBlock" class="help-block">Don't use anything later than ICU day 14.</span>
            </div>


            <div class="form-group ">
                <label for="id_rrt_flag">
                    RRT administration in ICU days 0-3
                </label>
                <select class="form-control" id="id_rrt_flag" name="rrt_flag">
                    <option value="">[Select]</option>
                    <option value="0" selected="selected">Did not received any RRT</option>
                    <option value="1">Received HD</option>
                    <option value="2">Received CRRT</option>
                    <!-- <option value="4">Received HD and CRRT (initiation < 24 hours apart)</option> -->
                    </select>

                <span id="helpBlock" class="help-block"></span>
            </div>

            <div class="form-group ">
                <label for="id_fluidoverload">
                    Cumulative Fluid Overload
                </label>
                <input class="form-control" id="id_fluidoverload" max="33.32" min="-9.73" name="fluidoverload" step="any" type="number" value=12.2 />

                <span id="helpBlock" class="help-block">-9.73 - 33.32 - Net fluid / patient mass</span>
            </div>


            <div class="form-group ">
                <label for="id_urineout">
                    Average hourly urine output
                </label>
                <input class="form-control" id="id_urineout" max="188.5" min="0" name="urineout" step="any" type="number" value=75.0 />

                <span id="helpBlock" class="help-block">0.0 - 188.5 mL / hr</span>
            </div>


        </div>

        <div class="row">
            <div class="col-sm-12">
                <button class="btn btn-warning btn-lg btn-full-width" style="margin-bottom: 10px; white-space: normal;" name="predict_baseline_dev", id="predict">
                    <span class="glyphicon glyphicon-play" style="margin-right: 5px"></span> Compute prediction</button>
            </div>

        </div>

        </div>

    </div>
    </div>

<!--    <div class="container">-->
        <!-- <hr> -->

        <div class="row">

              <!-- Internationalization -->

        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <hr>
                    <h3> Variables description </h3>
                    <p>
                        <ul>
                            <li> <strong> Baseline serum creatinine </strong>: lowest serum creatinine within 3 months prior to ICU admission or calculated from the Modification of Diet in Renal Disease formula using an estimated glomerular filtration rate of 75 ml/min/1.73 m<sup>2</sup>  </li>
                            <li> <strong> Mechanical hemodynamic support </strong>: LVAD, BiVAD, ECMO, IABP </li>
                            <li> <strong> Pharmacological hemodynamic support </strong>: vasopressive or inotropic medication</li>
                        </ul>
                    </p>
                </div>
            </div>
        </div>

        </div>

    <div class="container">
        <!-- <hr> -->

        <div class="row">

              <!-- Internationalization -->

        <div class="container">
            <div class="row">
                <div class="col-sm-9 reference">
                    <hr>
                    <h1> Reference</h1>


                    <div class="col-sm-1 vcenter">
                        <a type="button" class="btn btn-default" href="http://rdcu.be/oRgq">
                            <span class="glyphicon glyphicon-open-file"></span>
                        </a>
                    </div><div class="col-sm-11 vcenter">
                        <p>
                        <span class="title">
                        Reference coming soon
                        </span> <br/>
                            Reference coming soon.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>


    <div class="footer">
        <hr>
        <div class="container">
            <p align="left"> &copy; University of Kentucky - Developed by Department of Internal Medicine and Institute for Biomedical Informatics, All rights reserved.
                <span style="float:right">Web form inspired by AKI-Predictor designed by M.Flechet & R.Pirson. Implemented by Taylor D. Smith.</span>
            </p>
        </div>
    </div>
</div> <!-- /container -->

<!-- The scroll to top feature -->
<div class="scroll-top-wrapper ">
    <span class="scroll-top-inner">
        <i class="fa fa-2x fa-arrow-circle-up"></i>
    </span>
</div>

<script src="/static/js/rango-jquery.js"></script>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="/static/js/bootstrap.min.js"></script>
<!-- login page -->

<script src="/static/js/jquery.backstretch.min.js"></script>


</body>
</html>
